<div class="page-header">
  <h1><%= @book.title %></h1>
  <% if current_user&.admin? %>
    <div>
      <%= render 'shared/button', text: 'Edit Book', path: edit_book_path(@book), variant: 'secondary' %>
      <%= render 'shared/button', text: 'New Chapter', path: new_book_chapter_path(@book), variant: 'primary' %>
    </div>
  <% end %>
</div>

<div class="book-grid">
  <% if @book.cover_image.attached? %>
    <%= link_to @book, class: "book-cover-item" do %>
      <%= image_tag(@book.cover_image.variant(resize_to_fill: [300, 450])) %>
    <% end %>
  <% end %>

  <% @book.chapters.order(:position).each do |chapter| %>
    <%= link_to([@book, chapter], class: "chapter-page") do %>
      <h3><%= chapter.title %></h3>
    <% end %>
  <% end %>
</div>

<%= link_to 'Back to books', books_path %>

