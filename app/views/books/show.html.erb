<div class="page-header">
  <h1><%= @book.title %></h1>
  <% if current_user&.admin? %>
    <div>
      <%= render 'shared/button', text: 'Edit Book', path: edit_book_path(@book), variant: 'secondary' %>
      <%= render 'shared/button', text: 'New Chapter', path: new_book_chapter_path(@book), variant: 'primary' %>
    </div>
  <% end %>
</div>

<div class="book-details">
  <p><strong>Author:</strong> <%= @book.author %></p>
  <p><strong>Description:</strong> <%= @book.description %></p>
  <% if current_user&.admin? %>
    <p><strong>Status:</strong> <%= @book.published? ? "Published" : "Draft" %></p>
  <% end %>
  <% if @book.cover_image_url.present? %>
    <%= image_tag @book.cover_image_url, alt: @book.title, class: "cover-image" %>
  <% end %>
</div>

<div class="chapters-list">
  <% @book.chapters.order(:position).each do |chapter| %>
    <div class="chapter-item">
      <%= link_to chapter.title, [@book, chapter] %>
      <div class="chapter-actions">
        <% if chapter.status.present? %>
          <span class="status-badge status-<%= chapter.status.parameterize %>"><%= chapter.status %></span>
        <% end %>
        <% if current_user&.admin? %>
          <%= render 'shared/button', text: 'Edit', path: edit_book_chapter_path(@book, chapter), variant: 'ghost' %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<%= link_to 'Back to books', books_path %>

